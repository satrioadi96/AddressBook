class Contact(db.Model):
    __tablename__ = 'contact'
    id = db.Column(db.Integer, primary_keys=False)  # , primary_keys = True
    name = db.Column(db.String(30))
    gender = db.Column(db.String(10))
    address = db.Column(db.String(250))
    phone_num = db.Column(db.String(10))
    age = db.Column(db.String(3))
    profession = db.Column(db.String(20))

    def __init__(self, name, gender, address, phone_num, age, profession):
        self.name = name
        self.gender = gender
        self.address = address
        self.phone_num = phone_num
        self.age = age
        self.profession = profession





@app.route('/submit', methods=['POST'])
def submit():
    if request.method == 'POST':
        name = request.form['name']
        gender = request.form['gender']
        address = request.form['address']
        phone_num = request.form['phone_num']
        age = request.form['age']
        profession = request.form['profession']
        
        if name == '':
            return render_template('index.html', message='Please enter required fields')
        if db.session.query(Contact).filter(Contact.name == name).count() == 0:
            contact = Contact(name, gender, address, phone_num, age, profession)
            db.session.add(contact)
            db.session.commit()
            
            contactResult = db.session.query(Contact).filter(Contact.id == 1)
            for result in contactResult:
              print(result.name)

            return render_template('success.html', data=name)
        return render_template('index.html', message='You have already submitted Contact')

